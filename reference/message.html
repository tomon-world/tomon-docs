<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>消息 | Tomon 开发者中心</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/assets/logo.png">
    <link rel="shortcut icon" href="/assets/favicon.ico">
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/assets/css/0.styles.f8733d72.css" as="style"><link rel="preload" href="/assets/js/app.1c24705e.js" as="script"><link rel="preload" href="/assets/js/2.85897444.js" as="script"><link rel="preload" href="/assets/js/29.57159a13.js" as="script"><link rel="preload" href="/assets/js/3.a9113d1a.js" as="script"><link rel="preload" href="/assets/js/4.469e4fa3.js" as="script"><link rel="prefetch" href="/assets/js/10.913caeaf.js"><link rel="prefetch" href="/assets/js/11.37907bec.js"><link rel="prefetch" href="/assets/js/12.8d0e8369.js"><link rel="prefetch" href="/assets/js/13.bf4a857b.js"><link rel="prefetch" href="/assets/js/14.217398eb.js"><link rel="prefetch" href="/assets/js/15.dc91dfb6.js"><link rel="prefetch" href="/assets/js/16.91830cb9.js"><link rel="prefetch" href="/assets/js/17.8f5eba92.js"><link rel="prefetch" href="/assets/js/18.39274315.js"><link rel="prefetch" href="/assets/js/19.fa008e14.js"><link rel="prefetch" href="/assets/js/20.030b85d9.js"><link rel="prefetch" href="/assets/js/21.01e2375b.js"><link rel="prefetch" href="/assets/js/22.d2740028.js"><link rel="prefetch" href="/assets/js/23.e703286b.js"><link rel="prefetch" href="/assets/js/24.c2ec3e87.js"><link rel="prefetch" href="/assets/js/25.e4232ef5.js"><link rel="prefetch" href="/assets/js/26.44b21c1c.js"><link rel="prefetch" href="/assets/js/27.eaec33c0.js"><link rel="prefetch" href="/assets/js/28.0bb2b7ac.js"><link rel="prefetch" href="/assets/js/30.165fd48e.js"><link rel="prefetch" href="/assets/js/31.4194df82.js"><link rel="prefetch" href="/assets/js/32.72369aeb.js"><link rel="prefetch" href="/assets/js/33.8bddf817.js"><link rel="prefetch" href="/assets/js/5.fd8dc469.js"><link rel="prefetch" href="/assets/js/6.6c79c495.js"><link rel="prefetch" href="/assets/js/7.ebe50847.js"><link rel="prefetch" href="/assets/js/8.0f51a364.js"><link rel="prefetch" href="/assets/js/9.33bff94e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f8733d72.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/logo.png" alt="Tomon 开发者中心" class="logo"> <span class="site-name can-hide">Tomon 开发者中心</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/overview/" class="nav-link">
  概览
</a></div><div class="nav-item"><a href="/reference/" class="nav-link router-link-active">
  参考
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/advanced/" class="nav-link">
  高级
</a></div><div class="nav-item"><a href="https://beta.tomon.co/invite/x3RMui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Tomon Bot World
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/tomon-world/tomon-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/overview/" class="nav-link">
  概览
</a></div><div class="nav-item"><a href="/reference/" class="nav-link router-link-active">
  参考
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/advanced/" class="nav-link">
  高级
</a></div><div class="nav-item"><a href="https://beta.tomon.co/invite/x3RMui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Tomon Bot World
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/tomon-world/tomon-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>参考</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/reference/" aria-current="page" class="sidebar-link">资源 REST API</a></li><li><a href="/reference/user.html" class="sidebar-link">用户</a></li><li><a href="/reference/guild.html" class="sidebar-link">群组</a></li><li><a href="/reference/channel.html" class="sidebar-link">频道</a></li><li><a href="/reference/role.html" class="sidebar-link">角色</a></li><li><a href="/reference/emoji.html" class="sidebar-link">表情符号</a></li><li><a href="/reference/message.html" aria-current="page" class="active sidebar-link">消息</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reference/message.html#数据定义" class="sidebar-link">数据定义</a></li><li class="sidebar-sub-header"><a href="/reference/message.html#消息-2" class="sidebar-link">消息</a></li><li class="sidebar-sub-header"><a href="/reference/message.html#消息反应" class="sidebar-link">消息反应</a></li><li class="sidebar-sub-header"><a href="/reference/message.html#消息置顶" class="sidebar-link">消息置顶</a></li><li class="sidebar-sub-header"><a href="/reference/message.html#消息转发" class="sidebar-link">消息转发</a></li></ul></li><li><a href="/reference/forward.html" class="sidebar-link">转发</a></li><li><a href="/reference/stamp.html" class="sidebar-link">表情</a></li><li><a href="/reference/invite.html" class="sidebar-link">邀请</a></li><li><a href="/reference/voice.html" class="sidebar-link">语音</a></li><li><a href="/reference/cbt-application.html" class="sidebar-link">申请激活码</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="消息"><a href="#消息" class="header-anchor">#</a> 消息</h1> <h2 id="数据定义"><a href="#数据定义" class="header-anchor">#</a> 数据定义</h2> <h3 id="消息message"><a href="#消息message" class="header-anchor">#</a> 消息<code>Message</code></h3> <table><thead><tr><th>属性名</th> <th>数据类型</th> <th>是否可选</th> <th>描述</th></tr></thead> <tbody><tr><td><code>id</code></td> <td><code>snowflake</code></td> <td>required</td> <td>消息 ID</td></tr> <tr><td><code>type</code></td> <td><code>number</code></td> <td>required</td> <td>消息类型</td></tr> <tr><td><code>channel_id</code></td> <td><code>snowflake</code></td> <td>required</td> <td>消息的频道 ID</td></tr> <tr><td><code>guild_id</code></td> <td><code>snowflake</code></td> <td>optional</td> <td>消息的群组 ID，如果是<code>null</code>则是私聊。*现在后台推送数据结构需要优化，目前<code>null</code>会表示为<code>&quot;0&quot;</code></td></tr> <tr><td><code>author</code></td> <td><code>User?</code></td> <td>required</td> <td>消息的发送方，如果是<code>null</code>，则是系统消息</td></tr> <tr><td><code>member</code></td> <td><code>Member?</code></td> <td>optional</td> <td>消息发送方的群组成员信息，如果是私聊则为<code>null</code></td></tr> <tr><td><code>content</code></td> <td><code>string?</code></td> <td>required</td> <td>消息的内容</td></tr> <tr><td><code>nonce</code></td> <td><code>snowflake</code></td> <td>required</td> <td>用于去重的字段</td></tr> <tr><td><code>timestamp</code></td> <td><code>string</code></td> <td>required</td> <td>消息的发送时间，ISO 8601 格式</td></tr> <tr><td><code>edited_timestamp</code></td> <td><code>string?</code></td> <td>required</td> <td>消息的修改时间，ISO 8601 格式</td></tr> <tr><td><code>pinned</code></td> <td><code>bool</code></td> <td>required</td> <td>是否置顶</td></tr> <tr><td><code>attachments</code></td> <td><code>Attachment[]</code></td> <td>required</td> <td>消息附带的文件</td></tr> <tr><td><code>mentions</code></td> <td><code>User[]</code></td> <td>required</td> <td>消息提及的人</td></tr> <tr><td><code>reactions</code></td> <td><code>Reaction[]</code></td> <td>required</td> <td>消息的反应</td></tr> <tr><td><code>stamp</code></td> <td><code>Stamp[]</code></td> <td>required</td> <td>消息的表情</td></tr> <tr><td><code>reply</code></td> <td><code>Message[]</code></td> <td>required</td> <td>消息的回复</td></tr></tbody></table> <h4 id="消息附件attachment"><a href="#消息附件attachment" class="header-anchor">#</a> 消息附件<code>Attachment</code></h4> <table><thead><tr><th>属性名</th> <th>数据类型</th> <th>是否可选</th> <th>描述</th></tr></thead> <tbody><tr><td><code>id</code></td> <td><code>snowflake</code></td> <td>required</td> <td>消息附件 ID</td></tr> <tr><td><code>filename</code></td> <td><code>string</code></td> <td>required</td> <td>附件文件名</td></tr> <tr><td><code>hash</code></td> <td><code>string</code></td> <td>required</td> <td>附件文件的 hash 值</td></tr> <tr><td><code>width</code></td> <td><code>number</code></td> <td>required</td> <td>附件图片的宽度</td></tr> <tr><td><code>height</code></td> <td><code>number</code></td> <td>required</td> <td>附件图片的高度</td></tr> <tr><td><code>size</code></td> <td><code>number</code></td> <td>required</td> <td>附件文件的大小</td></tr> <tr><td><code>url</code></td> <td><code>string</code></td> <td>required</td> <td>附件文件的链接</td></tr></tbody></table> <h4 id="消息反应reaction"><a href="#消息反应reaction" class="header-anchor">#</a> 消息反应<code>Reaction</code></h4> <table><thead><tr><th>属性名</th> <th>数据类型</th> <th>是否可选</th> <th>描述</th></tr></thead> <tbody><tr><td><code>emoji</code></td> <td><code>PartialEmoji</code></td> <td>required</td> <td>Emoji 信息</td></tr> <tr><td><code>count</code></td> <td><code>number</code></td> <td>required</td> <td>反应数量</td></tr> <tr><td><code>me</code></td> <td><code>bool</code></td> <td>required</td> <td>自己是否参与了反应</td></tr></tbody></table> <h4 id="消息反应-emojipartialemoji"><a href="#消息反应-emojipartialemoji" class="header-anchor">#</a> 消息反应 Emoji<code>PartialEmoji</code></h4> <table><thead><tr><th>属性名</th> <th>数据类型</th> <th>是否可选</th> <th>描述</th></tr></thead> <tbody><tr><td><code>id</code></td> <td><code>snowflake</code></td> <td>optional</td> <td>群组定义 Emoji 的 ID，如果是系统 Emoji，则没有 ID</td></tr> <tr><td><code>name</code></td> <td><code>string</code></td> <td>optional</td> <td>Emoji 名称，或者系统 Emoji 的字符</td></tr></tbody></table> <h4 id="消息表情stamp"><a href="#消息表情stamp" class="header-anchor">#</a> 消息表情<code>Stamp</code></h4> <p>参见<a href="stamp#%E8%A1%A8%E6%83%85">表情数据定义</a></p> <p>例如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136769608232771584&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;channel_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136412396142460928&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;77431520989548544&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;discriminator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0990&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;avatar&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;avatar_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://cdn.tomon.co/avatars/5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-06-12T09:53:35.660Z&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136769607095721984&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;attachments&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136769608220188672&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;filename&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CF18499C35C281BB7647B20E0D26AC25.jpg&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cf18499c35c281bb7647b20e0d26ac25&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jpg&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;size&quot;</span><span class="token operator">:</span> <span class="token number">29503</span><span class="token punctuation">,</span>
      <span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">466</span><span class="token punctuation">,</span>
      <span class="token property">&quot;width&quot;</span><span class="token operator">:</span> <span class="token number">454</span><span class="token punctuation">,</span>
      <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://cdn.tomon.co/attachments/cf18499c35c281bb7647b20e0d26ac25.jpg&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;reactions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mentions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;stamps&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;reply&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;pinned&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;edited_timestamp&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;member&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;nick&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cat&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;roles&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;136460205348659200&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="消息-2"><a href="#消息-2" class="header-anchor">#</a> 消息</h2> <h3 id="获取频道消息列表"><a href="#获取频道消息列表" class="header-anchor">#</a> 获取频道消息列表</h3> <div class="api"><code><span class="get">GET</span> <span>/channels/{channelId}/messages</span></code></div> <p>获取频道消息列表，需要有查看历史消息权限。</p> <h4 id="query-参数"><a href="#query-参数" class="header-anchor">#</a> Query 参数</h4> <table><thead><tr><th>属性名</th> <th>数据类型</th> <th>是否必要</th> <th>描述</th></tr></thead> <tbody><tr><td><code>before</code></td> <td><code>snowflake?</code></td> <td>optional</td> <td>拉取指定消息 ID 之前的消息，如果是 null，则从最晚的消息开始拉取</td></tr> <tr><td><code>after</code></td> <td><code>snowflake?</code></td> <td>optional</td> <td>拉取指定消息 ID 之后的消息，如果是 null，则从最早的消息开始拉取</td></tr> <tr><td><code>around</code></td> <td><code>snowflake</code></td> <td>optional</td> <td>拉取指定消息 ID 附近的消息</td></tr> <tr><td><code>limit</code></td> <td><code>number</code></td> <td>optional</td> <td>拉取的数量，1-100 条，默认 50 条</td></tr></tbody></table> <h4 id="响应"><a href="#响应" class="header-anchor">#</a> 响应</h4> <p>HTTP 状态码：<span class="httpstatus" style="background-color:#08B162AA;" data-v-66726a90>200</span></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136460577878351872&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;channel_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136412396142460928&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;77431520989548544&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;discriminator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0990&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;avatar&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;avatar_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://cdn.tomon.co/avatars/5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wwerwr&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-06-11T13:25:37.081Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136460577659854848&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;attachments&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;reactions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token property">&quot;emoji&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;🙄&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">&quot;me&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token property">&quot;emoji&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;🤢&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">&quot;me&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;mentions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;stamps&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pinned&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;edited_timestamp&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136460582265589760&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;channel_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136412396142460928&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;77431520989548544&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;discriminator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0990&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;avatar&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;avatar_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://cdn.tomon.co/avatars/5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;234234&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-06-11T13:25:38.127Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136460582063874048&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;attachments&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;reactions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;mentions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;stamps&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pinned&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;edited_timestamp&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="获取频道单条消息"><a href="#获取频道单条消息" class="header-anchor">#</a> 获取频道单条消息</h3> <div class="api"><code><span class="get">GET</span> <span>/channels/{channelId}/messages/{messageId}</span></code></div> <p>获取频道内的一条消息，需要有查看历史消息权限。</p> <h4 id="响应-2"><a href="#响应-2" class="header-anchor">#</a> 响应</h4> <p>HTTP 状态码：<span class="httpstatus" style="background-color:#08B162AA;" data-v-66726a90>200</span></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136460582265589760&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;channel_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136412396142460928&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;77431520989548544&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;discriminator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0990&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;avatar&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;avatar_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://cdn.tomon.co/avatars/5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;234234&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-06-11T13:25:38.127Z&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136460582063874048&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;attachments&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;reactions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mentions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;stamps&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;pinned&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;edited_timestamp&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="发送消息"><a href="#发送消息" class="header-anchor">#</a> 发送消息</h3> <div class="api"><code><span class="post">POST</span> <span>/channels/{channelId}/messages</span></code></div> <p>发送消息，支持发送文件（图片）。发送后 websocket 仍然会收到此条发送的消息，需要客户端根据<code>nonce</code>字段去重。</p> <h4 id="json-参数"><a href="#json-参数" class="header-anchor">#</a> JSON 参数</h4> <p>支持<code>application/json</code>和<code>multipart/form-data</code>。multipart 支持文件发送，但是其他部分放到<code>payload_json</code>字段。
<code>content</code>可以包含 emoji、提及。</p> <table><thead><tr><th>属性名</th> <th>数据类型</th> <th>是否必要</th> <th>描述</th></tr></thead> <tbody><tr><td><code>content</code></td> <td><code>string</code></td> <td>optional</td> <td>消息内容</td></tr> <tr><td><code>nonce</code></td> <td><code>snowflake</code></td> <td>required</td> <td>用于去重的值</td></tr></tbody></table> <p>例如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span> <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;你好&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136769231630016512&quot;</span> <span class="token punctuation">}</span>
</code></pre></div><p>如果是 multipart：</p> <table><thead><tr><th>属性名</th> <th>数据类型</th> <th>是否必要</th> <th>描述</th></tr></thead> <tbody><tr><td><code>payload_json</code></td> <td><code>string</code></td> <td>optional</td> <td>消息的其他字段</td></tr> <tr><td><code>files</code></td> <td><code>File[]</code></td> <td>optional</td> <td>上传的文件</td></tr></tbody></table> <h4 id="响应-3"><a href="#响应-3" class="header-anchor">#</a> 响应</h4> <p>HTTP 状态码：<span class="httpstatus" style="background-color:#08B162AA;" data-v-66726a90>200</span></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136769608232771584&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;channel_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136412396142460928&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;77431520989548544&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;discriminator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0990&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;avatar&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;avatar_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://cdn.tomon.co/avatars/5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-06-12T09:53:35.660Z&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136769607095721984&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;attachments&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136769608220188672&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;filename&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CF18499C35C281BB7647B20E0D26AC25.jpg&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cf18499c35c281bb7647b20e0d26ac25&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jpg&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;size&quot;</span><span class="token operator">:</span> <span class="token number">29503</span><span class="token punctuation">,</span>
      <span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">466</span><span class="token punctuation">,</span>
      <span class="token property">&quot;width&quot;</span><span class="token operator">:</span> <span class="token number">454</span><span class="token punctuation">,</span>
      <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://cdn.tomon.co/attachments/cf18499c35c281bb7647b20e0d26ac25.jpg&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;reactions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mentions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;stamps&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;pinned&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;edited_timestamp&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;member&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;nick&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cat&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;roles&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;136460205348659200&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="修改消息"><a href="#修改消息" class="header-anchor">#</a> 修改消息</h3> <div class="api"><code><span class="patch">PATCH</span> <span>/channels/{channelId}/messages/{messageId}</span></code></div> <p>修改消息，只能修改自己发送的消息</p> <h4 id="json-参数-2"><a href="#json-参数-2" class="header-anchor">#</a> JSON 参数</h4> <table><thead><tr><th>属性名</th> <th>数据类型</th> <th>是否必要</th> <th>描述</th></tr></thead> <tbody><tr><td><code>content</code></td> <td><code>string</code></td> <td>optional</td> <td>消息内容</td></tr></tbody></table> <h4 id="响应-4"><a href="#响应-4" class="header-anchor">#</a> 响应</h4> <p>HTTP 状态码：<span class="httpstatus" style="background-color:#08B162AA;" data-v-66726a90>200</span></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136460582265589760&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;channel_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136412396142460928&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;77431520989548544&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;discriminator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0990&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;avatar&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;avatar_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://cdn.tomon.co/avatars/5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;abcdefg&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-06-11T13:25:38.127Z&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136460582063874048&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;attachments&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;reactions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mentions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;stamps&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;pinned&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token property">&quot;edited_timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-06-12T09:56:05.431Z&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="删除消息"><a href="#删除消息" class="header-anchor">#</a> 删除消息</h3> <div class="api"><code><span class="delete">DELETE</span> <span>/channels/{channelId}/messages/{messageId}</span></code></div> <p>删除消息，可以删除自己的消息，如果有消息管理权限，可以删除其他人的消息。</p> <h4 id="响应-5"><a href="#响应-5" class="header-anchor">#</a> 响应</h4> <p>HTTP 状态码：<span class="httpstatus" style="background-color:#08B162AA;" data-v-66726a90>204</span></p> <hr> <h2 id="消息反应"><a href="#消息反应" class="header-anchor">#</a> 消息反应</h2> <h3 id="添加反应"><a href="#添加反应" class="header-anchor">#</a> 添加反应</h3> <div class="api"><code><span class="put">PUT</span> <span>/channels/{channelId}/messages/{messageId}/reactions/{emojiId}/@me</span></code></div> <p>给消息添加反应。如果是群组自定义 Emoji，则<code>emojiId</code>填写<code>name:id</code>，如果是系统 Emoji，则<code>emojiId</code>填写 Emoji 字符</p> <h4 id="响应-6"><a href="#响应-6" class="header-anchor">#</a> 响应</h4> <p>HTTP 状态码：<span class="httpstatus" style="background-color:#08B162AA;" data-v-66726a90>204</span></p> <h3 id="删除反应"><a href="#删除反应" class="header-anchor">#</a> 删除反应</h3> <div class="api"><code><span class="delete">DELETE</span> <span>/channels/{channelId}/messages/{messageId}/reactions/{emojiId}/@me</span></code></div> <p>删除消息的反应。</p> <h4 id="响应-7"><a href="#响应-7" class="header-anchor">#</a> 响应</h4> <p>HTTP 状态码：<span class="httpstatus" style="background-color:#08B162AA;" data-v-66726a90>204</span></p> <h3 id="删除用户的反应"><a href="#删除用户的反应" class="header-anchor">#</a> 删除用户的反应</h3> <div class="api"><code><span class="delete">DELETE</span> <span>/channels/{channelId}/messages/{messageId}/reactions/{emojiId}/{userId}</span></code></div> <p>删除指定用户的反应。需要有管理消息的权限。</p> <h4 id="响应-8"><a href="#响应-8" class="header-anchor">#</a> 响应</h4> <p>HTTP 状态码：<span class="httpstatus" style="background-color:#08B162AA;" data-v-66726a90>204</span></p> <h3 id="获取添加反应的用户列表"><a href="#获取添加反应的用户列表" class="header-anchor">#</a> 获取添加反应的用户列表</h3> <div class="api"><code><span class="get">GET</span> <span>/channels/{channelId}/messages/{messageId}/reactions/{emojiId}</span></code></div> <p>获取添加反应的用户列表。</p> <h4 id="query-参数-2"><a href="#query-参数-2" class="header-anchor">#</a> Query 参数</h4> <table><thead><tr><th>属性名</th> <th>数据类型</th> <th>是否必要</th> <th>描述</th></tr></thead> <tbody><tr><td><code>before</code></td> <td><code>snowflake?</code></td> <td>optional</td> <td>拉取指定用户 ID 之前的反应，如果是 null，则从最晚的人开始拉取</td></tr> <tr><td><code>after</code></td> <td><code>snowflake?</code></td> <td>optional</td> <td>拉取指定用户 ID 之后的反应，如果是 null，则从最早的人开始拉取</td></tr> <tr><td><code>limit</code></td> <td><code>number</code></td> <td>optional</td> <td>拉取的数量，1-100 条，默认 50 条</td></tr></tbody></table> <h4 id="响应-9"><a href="#响应-9" class="header-anchor">#</a> 响应</h4> <p>HTTP 状态码：<span class="httpstatus" style="background-color:#08B162AA;" data-v-66726a90>200</span></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;user&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;77431520989548544&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;discriminator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0990&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;avatar&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;avatar_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://cdn.tomon.co/avatars/5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;createdAt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-06-11T13:25:44.784Z&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="清除反应"><a href="#清除反应" class="header-anchor">#</a> 清除反应</h3> <div class="api"><code><span class="delete">DELETE</span> <span>/channels/{channelId}/messages/{messageId}/reactions/{emojiId}</span></code></div> <p>清除某个反应</p> <h4 id="响应-10"><a href="#响应-10" class="header-anchor">#</a> 响应</h4> <p>HTTP 状态码：<span class="httpstatus" style="background-color:#08B162AA;" data-v-66726a90>204</span></p> <hr> <h2 id="消息置顶"><a href="#消息置顶" class="header-anchor">#</a> 消息置顶</h2> <h3 id="获取所有置顶消息"><a href="#获取所有置顶消息" class="header-anchor">#</a> 获取所有置顶消息</h3> <div class="api"><code><span class="get">GET</span> <span>/channels/{channelId}/pins</span></code></div> <p>获取所有置顶消息</p> <h4 id="query-参数-3"><a href="#query-参数-3" class="header-anchor">#</a> Query 参数</h4> <table><thead><tr><th>属性名</th> <th>数据类型</th> <th>是否必要</th> <th>描述</th></tr></thead> <tbody><tr><td><code>before</code></td> <td><code>snowflake?</code></td> <td>optional</td> <td>拉取指定消息 ID 之前的消息，如果是 null，则从最晚的消息开始拉取</td></tr> <tr><td><code>after</code></td> <td><code>snowflake?</code></td> <td>optional</td> <td>拉取指定消息 ID 之后的消息，如果是 null，则从最早的消息开始拉取</td></tr> <tr><td><code>limit</code></td> <td><code>number</code></td> <td>optional</td> <td>拉取的数量，1-100 条，默认 50 条</td></tr></tbody></table> <h4 id="响应-11"><a href="#响应-11" class="header-anchor">#</a> 响应</h4> <p>HTTP 状态码：<span class="httpstatus" style="background-color:#08B162AA;" data-v-66726a90>200</span></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136460577878351872&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;channel_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136412396142460928&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;77431520989548544&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;discriminator&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0990&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;avatar&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;monoceros&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;avatar_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://cdn.tomon.co/avatars/5d3ca10119f069727fe3b6ddd0998296.png&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wwerwr&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-06-11T13:25:37.081Z&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token string">&quot;136460577659854848&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;attachments&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;reactions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token property">&quot;emoji&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;🙄&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">&quot;me&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token property">&quot;emoji&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;🤢&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">&quot;me&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token property">&quot;emoji&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;78344528964096000&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">&quot;me&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;mentions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;stamps&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pinned&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;edited_timestamp&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="添加置顶消息"><a href="#添加置顶消息" class="header-anchor">#</a> 添加置顶消息</h3> <div class="api"><code><span class="put">PUT</span> <span>/channels/{channelId}/pins/{messageId}</span></code></div> <p>添加置顶消息</p> <h4 id="响应-12"><a href="#响应-12" class="header-anchor">#</a> 响应</h4> <p>HTTP 状态码：<span class="httpstatus" style="background-color:#08B162AA;" data-v-66726a90>204</span></p> <h3 id="删除置顶消息"><a href="#删除置顶消息" class="header-anchor">#</a> 删除置顶消息</h3> <div class="api"><code><span class="delete">DELETE</span> <span>/channels/{channelId}/pins/{messageId}</span></code></div> <p>删除置顶消息</p> <h4 id="响应-13"><a href="#响应-13" class="header-anchor">#</a> 响应</h4> <p>HTTP 状态码：<span class="httpstatus" style="background-color:#08B162AA;" data-v-66726a90>204</span></p> <hr> <h2 id="消息转发"><a href="#消息转发" class="header-anchor">#</a> 消息转发</h2> <h3 id="转发消息"><a href="#转发消息" class="header-anchor">#</a> 转发消息</h3> <p>（API 与发送消息相同）</p> <table><thead><tr><th>属性名</th> <th>数据类型</th> <th>是否必要</th> <th>描述</th></tr></thead> <tbody><tr><td><code>forward_channel</code></td> <td><code>snowflake</code></td> <td>required</td> <td>需要转发的原消息频道 ID</td></tr> <tr><td><code>forwards</code></td> <td><code>snowflake[]</code></td> <td>required</td> <td>需要转发的消息 ID（对应此频道 ID）</td></tr></tbody></table> <h4 id="请求范例"><a href="#请求范例" class="header-anchor">#</a> 请求范例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;转发消息&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;nonce&quot;</span><span class="token operator">:</span> <span class="token string">&quot;6664377663014215680&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;forward_channel&quot;</span><span class="token operator">:</span> <span class="token string">&quot;132700825301630976&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;forwards&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;141138732647452672&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;141138749076541440&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;141138787882242048&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;141142683665043457&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;142500951998074880&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="返回"><a href="#返回" class="header-anchor">#</a> 返回</h4> <p>参考 <a href="forward#%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89">转发数据定义</a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/tomon-world/tomon-docs/edit/master/docs/reference/message.md" target="_blank" rel="noopener noreferrer">在GitHub上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">11/2/2020, 10:30:29 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/reference/emoji.html" class="prev">
        表情符号
      </a></span> <span class="next"><a href="/reference/forward.html">
        转发
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1c24705e.js" defer></script><script src="/assets/js/2.85897444.js" defer></script><script src="/assets/js/29.57159a13.js" defer></script><script src="/assets/js/3.a9113d1a.js" defer></script><script src="/assets/js/4.469e4fa3.js" defer></script>
  </body>
</html>
